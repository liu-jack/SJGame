var sdk={common:{base:{},hooks:{},events:{},ui:{},utils:{}},system:{collections:{},controllers:{},models:{},routes:{},views:{}}},S=sdk;S.SCHK=S.common.hooks,S.SCEV=S.common.events,S.SCUI=S.common.ui,S.SCUT=S.common.utils,S.SSRO=S.system.routes,S.SSCL=S.system.collections,S.SSCT=S.system.controllers,S.SSMO=S.system.models,S.SSVW=S.system.views,function(t){t.initRoutes=function(e){t.SCEV.Proxy.trigger(t.SCEV.EventType.SDK_INIT_ROUTE,e)},t.initSdkBase=function(){t.sdkBase=new sdkBase,t.sdkBase.sdkInfo()},t.initView=function(e){t.SCEV.Proxy.trigger(t.SCEV.EventType.SDK_INIT_VIEW,e)},t.initSync=function(){t.SCEV.Proxy.trigger(t.SCEV.EventType.SDK_INIT_SYNC)},t.initTouch=function(){t.SCEV.Proxy.trigger(t.SCEV.EventType.SDK_INIT_TOUCH)},t.initHooks=function(){_.isUndefined(sdk.common.hooks.request)||t.sdkBase.hooks.extend("request",sdk.common.hooks.request)},t.initHandler=function(){t.SSCT.GetHandler=function(e,n){t.SSCT.handler||(t.SSCT.handler={});var i=e+"Ins",r="";switch(t.SSCT.handler[i]||(t.SSCT.handler[i]={}),e){case"Collection":r="SSCL";break;case"Model":r="SSMO";break;case"View":r="SSVW";break;case"Controller":r="SSCT"}return t.SSCT.handler[i][n]||(t.SSCT.handler[i][n]=new t[r][n]),t.SSCT.handler[i][n]}},t.initGlobal=function(){function e(t,e){if(!t)return!1;if(!e)return!1;var n=t.split("."),i=e.split(".");if(n.length<3||3>i)return!1;var r=100*parseInt(n[0])+10*parseInt(n[1])+parseInt(n[2]),o=100*parseInt(i[0])+10*parseInt(i[1])+parseInt(i[2]);return r>o?1:r==o?0:-1}function n(n){return e(t.global.version,n)}t.global=t.global||{};var i=rConfig.VERSIONS.DEFAULT;t.global.version=i,t.global.pages={},t.sdkBase.sdkInfo(function(e){i=e.data.ve||i,t.global.version=i},function(){console.log("获取SDK信息失败！采用缺省值")}),t.global.versionCompare=e,t.global.compareTo=n},t.initializer=function(e){t.initSdkBase(),t.initHooks(),t.initSync(),t.initGlobal(),t.initTouch(),t.initHandler(),t.initView(e),t.initRoutes(e)}}(sdk);var rConfig={user:{usernameFilter:/([^a-z0-9A-Z\u0080-\uFFFF]+)/,passwordFilter:/([^0-9A-Za-z]+)/,accountFilter:/^[0-9]*$/,emailAccountFilter:/^([\w]+([\w-\.+]*[\w-]+)?)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,mobileFilter:/^[0-9]*$/,showUserNickLen:7,defaultGameName:"游戏账号"},pay:{historyPerpage:10,historySplitMax:30},bbs:{serverTimeout:3e4,listPerIndexPage:30,listPerPage:20,subPageCount:3,listSubPage:10,topicReplyCount:10,ContentLengthLimit:200,group:{exp:1,test:2,ask:3,mood:4,advise:5},cacheTime:{index:300,board:3600,topic:600,reply:600,search:600},faces:{1:"01_wx.png",2:"02_pz.png",3:"03_hs.png",4:"04_fd.png",5:"05_bk.png",6:"06_ll.png",7:"07_hx.png",8:"08_bz.png",9:"09_fk.png",10:"10_dk.png",11:"11_gg.png",12:"12_fh.png",13:"13_tp.png",14:"14_cy.png",15:"15_jy.png",16:"16_qq.png",17:"17_tx.png",18:"18_zj.png",19:"19_zk.png",20:"20_kl.png",21:"21_ka.png",22:"22_ot.png",23:"23_zm.png",24:"24_hx.png",25:"25_bs.png",26:"26_dm.png",27:"27_yw.png",28:"28_yd.png",29:"29_lh.png",30:"30_gz.png"},faceDir:"../common/images/faces/"},feedBackCls:"ui-feed",hasFeedBack:["ui-lbtn","ui-lblur","ui-pwdbtn","ui-fbtn","li-r-btn","li-l-btn","ui-valid","QsBoxFeed","splitPage","ui-rebtn","postTitle","replyNum","seach_a","ui-dkli","lo_btn","input_login","Qsel","Qseld","input_reg"],blockFeedBack:["ui-disable"],template:{},enumTypes:{gender:{0:"女",1:"男"}},payWaysMap:{101:"U点支付",1:"移动充值卡",2:"联通充值卡",3:"电信充值卡",4:"骏网一卡通",5:"盛大充值卡",6:"征途充值卡",1007:"Q币充值卡",1008:"久游充值卡",1009:"易宝e卡通",1010:"网易充值卡",7:"完美充值卡",1012:"搜狐充值卡",1013:"纵游一卡通",1014:"天下一卡通",1015:"天宏一卡通",201:"支付宝",202:"支付宝",501:"工商银行",502:"建设银行",503:"招商银行",1021:"移动话费支付",1022:"U点支付"},apis:{PAY:"pay.page.wap.create",ALIPAY:"pay.page.wap.create",GET_PAY_WAY:"pay.charge.config.payway",CARD_PAY:"pay.charge.card.pay",UDPAY:"pay.charge.up.pay",PAY_WAY_USAGE:"pay.charge.config.paywayUsage",UPOINT_BALANCE:"pay.upiont.up.queryBalance",USER_DETAIL:"ucid.sns.detaiInfo",VALID_CODE:"ucid.user.verifyAlpha",USER_BASEINFO:"account.getUserBasicInfoByUid",USER_DETAIL:"account.getUserDetailInfoByUid",UPDATE_NICKNAME:"account.updateUserNameByUid",UPDATE_USER_DETAIL:"account.updateUserDetailByUid",GET_ACCOUNT_INFO:"ucid.account.getAccountInfoByLoginName",RECENT_GAMES:"ucid.sns.gameHistory",UPDATE_PASSWORD:"ucid.user.changePassword",PAY_HISTORY:"pay.order.query",VIP:"vip.query.vipInfo",SEND_MSG_TO_MOBILE:"test.sendMsg",BIND_MOBILE:"text.bindMobile",SECURITY_QUESTION:"ucid.account.getPasswordQuestion",VALIDATE_ANSWER:"ucid.account.verifyPasswordQuestion",RESET_PASSWORD:"ucid.account.resetPasswordByPasswordQuestion",QUERY_HISTORY:"ucid.user.ucidHistory",GET_GAMENOTICE:"msg.notice.list",BBS_GET_BOARD_BY_GAME:"h5bbs.getBoardStatsByGame",BBS_GET_BOARD_INDEX_INFO:"h5bbs.getBoardIndexObjects",BBS_GET_TOP_TOPICS:"h5bbs.getTopTopics",BBS_GET_TOPICS:"h5bbs.getTopics",BBS_GET_ELITE_TOPICS:"h5bbs.getEliteTopics",BBS_GET_NEW_TOPICS:"h5bbs.getNewTopics",BBS_GET_TOPICS_BY_GROUP:"h5bbs.getTopicsByGroup",BBS_SEARCH_BOARD_TOPICS:"h5bbs.searchBoardTopics",BBS_GET_TOPIC:"h5bbs.getTopic",BBS_DELETE_TOPIC:"bbs.deleteTopic",BBS_CREATE_TOPIC:"bbs.createTopic",BBS_UPDATE_TOPIC:"bbs.updateTopic",BBS_DELETE_FILE:"bbs.deleteFile",BBS_UPDATE_FILE:"bbs.updateFile",BBS_GET_REPLIES:"h5bbs.getReplies",BBS_DELETE_REPLY:"bbs.deleteReply",BBS_CREATE_REPLY:"bbs.createReply",BBS_VOTE:"bbs.vote",BBS_DELETE_FILE:"bbs.deleteFile",BBS_UPDATE_FILE:"bbs.updateFile",UCID_ACCOUNT_QUERYSECURESTATE:"ucid.account.querySecureState",UCID_ACCOUNT_SENDMOBILESMSCODE:"ucid.account.sendMobileSmsCode",UCID_ACCOUNT_BINDMOBILEBYSMSCODE:"ucid.account.bindMobileBySmsCode",UCID_ACCOUNT_CHECKISBINDED:"ucid.account.queryUidByMobi",UCID_ACCOUNT_SETPASSWORDQUESTION:"ucid.account.setPasswordQuestion"},models:{USER:"user",GAME:"game",PAY:"pay",BBS:"bbs",GENERAL:"general"},defaultActions:{sso:"login",user:"userInfo",pay:"render",bbs:"index"},businessCache:["payHistory"],ACCOUNT_TYPE:{UC:0,GAME:1},SMSContent:{CMCC:"cmcc",UNICOM:"unicom",cmcc:{dstAddr:"106575555113126",text:"0604"},unicom:{dstAddr:"10690058126",text:"0604"}},VERSIONS:{DEFAULT:"2.0.0",AUTO_LOGIN_VERSION:"2.0.4"},straightApis:["h5bbs.getBoardStatsByGame","h5bbs.getBoardIndexObjects","h5bbs.getTopTopics","h5bbs.getTopics","h5bbs.getEliteTopics","h5bbs.getNewTopics","h5bbs.getTopicsByGroup","h5bbs.searchBoardTopics","h5bbs.getTopic","h5bbs.getReplies"]};S.SCEV.EventType=S.SCEV.EventType||{},_.extend(S.SCEV.EventType,{SDK_INIT_FINISH:"sdkInitFinish",SDK_INIT_SYNC:"sdkInitSync",SDK_INIT_TOUCH:"sdkInitTouch",SDK_INIT_VIEW:"sdkInitView",SDK_INIT_ROUTE:"sdkInitRoute",PRE_ROUTE:"preRoute",SDK_WINDOW_EVENT:"listenEvent",SDK_REMOVE_WIN_EVENT:"removeEvent"});S.SCEV.Handler=S.SCEV.Handler||{},function(t){t.handlers={},t.viewInstance=t.viewInstance||{},t.sdkInitSync=function(t,e){var n=[],i=0;Backbone.jsonpSync=function(t,e,r){var o,s,a="jsonpSync"+i++;return n.push(a),s={url:e.url+"&callback="+a,data:r.data},o=setTimeout(function(){-1!=n.indexOf(a)&&(r.error&&r.error.apply(this,[{code:408,msg:"服务器接口 "+e.url+" 请求超时"},e]),window[a]=function(){delete window[a]},n=_.without(n,a))},rConfig.bbs.serverTimeout),window[a]=function(t){"2000000"==t.state.code&&r.success?r.success.apply(this,[t,e]):r.error&&r.error.apply(this,[t.state,e]),delete window[a],clearTimeout(o),n=_.without(n,a)},$.ajaxJSONP(s)},Backbone.sync=function(t,n,i){var r,o,s;if(_.isUndefined(n.url))throw new Error('A "url" property or function must be specified');var a=!1;if(_.each(rConfig.straightApis,function(t){n.url.indexOf(t)>=0&&(a=!0)}),a)return Backbone.jsonpSync.apply(this,arguments);if(_.isUndefined(i.success))throw new Error('A "success" property or function must be specified');if(s=i.success,o=i.error||function(){},r=n.url.split("/"),_.isEmpty(r[0])||_.isEmpty(r[1]))return o(n,{success:!1,msg:"请求地址错误"}),!1;if(e=_.isUndefined(i.data)||_.isEmpty(i.data)?{}:i.data,_.isEmpty(e)&&n&&("create"==t||"update"==t)&&(e=n.toJSON()),r[0]==S.sdkBase.servType.SDKSERVER&&r[1]==S.sdkBase.actions.CALL_SDK_SERVER){if(_.isUndefined(r[2])||_.isEmpty(r[2]))return o(n,{success:!1,msg:"请求地址错误"}),!1;e.api=r[2]}S.sdkBase.request(r[0],r[1],e,s,o,!0,30,i)}},t.sdkInitTouch=function(){_.extend(Backbone.View.prototype,Backbone.Events,{delegateEvents:function(t){sdk.VirtualEvent.delegateEvents(t,this)},undelegateEvents:function(){sdk.VirtualEvent.undelegateEvents(this)}})},t.preRoute=function(t,e){document.removeEventListener("hidekeyboard"),_.isUndefined(e)||_.isEmpty(e)||_.isUndefined(e.enterPage)||sdk.Log.pageEnter(e.enterPage,e.enterBusiness),console.log("add hide key board event"),document.addEventListener("hidekeyboard",function(){console.log("key board event fire"),document.body.scrollTop=0})},t.listenEvent=function(e,n){var i=n&&n.eventName?n.eventName:null;if(!i)throw new Error("Wrong EventType ：["+i+"]");var r=n&&n.handler?n.handler:function(){};t.handlers[i]=t.handlers[i]||[],t.handlers[i].push(r),document.addEventListener(i,r)},t.removeEvent=function(e,n){var i=n&&n.eventName?n.eventName:null;if(!i)throw new Error("Wrong EventType ：["+i+"]");t.handlers[i]&&(_.each(t.handlers[i],function(t){document.removeEventListener(i,t)}),t.handlers[i]=[])},t.sdkInitView=function(e,n){var i,r=S.SSVW,o=t.viewInstance;switch(S.SSCT.handler?"":S.SSCT.handler={},S.SSCT.handler.ViewIns?"":S.SSCT.handler.ViewIns={},i=S.SSCT.handler.ViewIns,n){case"user":o.user=new r.User,o.sso=new r.Sso,o.register=new r.Register,o.vip=new r.Vip,o.secrecy=new r.Secrecy,o.findPassword=new r.FindPassword,i.User=o.user,i.Sso=o.sso,i.Register=o.register,i.Vip=o.vip,i.Secrecy=o.secrecy,i.FindPassword=o.findPassword;break;case"pay":o.pay=new r.Pay,i.Pay=o.pay;break;case"game":o.game=new r.Game,i.Game=o.game;break;case"bbs":o.bbs=new r.BBS,o.post=new r.Post,o.topic=new r.Topic,o.reply=new r.Reply,i.BBS=o.bbs,i.Post=o.post,i.Topic=o.topic,i.Reply=o.reply;break;case"general":o.general=new r.General,i.General=o.general}},t.sdkInitRoute=function(e,n){switch(S.SSRO,n){case"user":Route.routeInit("User");break;case"pay":Route.routeInit("Pay");break;case"game":Route.routeInit("Game");break;case"bbs":Route.routeInit("Bbs");break;case"general":}var i=t.viewInstance;window.Route&&Route.register("sdk",function(t,e){var r=n,o=e,s=o.shift(),a=o.shift();"user"==n&&(r="sso","user"===s&&"register"===a&&(s="register",a="rapidReg")),s=s?s:r;var c=rConfig.defaultActions[s];a=a?a:c,console.log("[request from : "+t+"]   --->  [model : "+s+"]  [action:"+a+"]   [params:"+o.toString()+"]"),i[s]&&i[s][a]&&i[s][a].apply(this,o)})}}(S.SCEV.Handler);sdk.common.events.Handler=sdk.common.events.Handler||{},function(t){t.sdkInitFinish=function(){}}(sdk.common.events.Handler);S.SCEV.Proxy=S.SCEV.Proxy||{},function(t){_.extend(t,Backbone.Events),t.on("all",function(t){var e=S.SCEV.Handler;return _.isEmpty(t)||e[t]&&_.isFunction(e[t])&&e[t].apply(this,arguments),this})}(S.SCEV.Proxy);sdk.common.hooks.request=sdk.common.hooks.request||{loadingEl:{},isLoading:!1,initialize:function(){_.bindAll(this)},start:function(t){!this.isLoading&&t.isAsyn&&(_.isUndefined(t.option)||_.isUndefined(t.option.quiet)||!1===t.option.quiet)&&(this.isLoading=!0,this.loadingEl[t.id]=S.common.ui.NoticeBox.loading())},success:function(t){!_.isEmpty(this.loadingEl[t.id])&&this.loadingEl[t.id].el.length>0&&setTimeout($.proxy(function(){S.common.ui.NoticeBox.hide(this.loadingEl[t.id],null,"remove"),this.loadingEl[t.id]={},this.isLoading=!1},this),1)},fail:function(t){!_.isEmpty(this.loadingEl[t.id])&&this.loadingEl[t.id].el.length>0&&setTimeout($.proxy(function(){S.common.ui.NoticeBox.hide(this.loadingEl[t.id],null,"remove"),this.loadingEl[t.id]={},this.isLoading=!1},this),1)},timeout:function(t){!_.isEmpty(this.loadingEl[t.id])&&this.loadingEl[t.id].el.length>0&&setTimeout($.proxy(function(){S.common.ui.NoticeBox.hide(this.loadingEl[t.id],null,"remove"),this.loadingEl[t.id]={},this.isLoading=!1},this),1)}};sdk.common.ui.Mask=sdk.common.ui.Mask||{},function(t){var e=!1,n=null,i={bgColor:"#000",opacity:"0",zIndex:190,showType:"fade"};t.showTime=0,t.isFading=!1,t.setup=function(t){_.extend(i,t)},t.show=function(r,o,s){t.showTime+=1;var a,c,u=i.opacity,l="absolute",h=r&&r.showType?r.showType:i.showType,d="fadeIn",f=200,p=function(){$(window).on("resize",function(){a=ucf.utils.Body.getPageSize(),n.css({width:a[2],height:a[3]})}),$(window).on("scroll",function(){c=ucf.utils.Body.getPageScroll(),console.log("page scroll : "+c[1]),n.css({top:c[1],left:c[0]})}),$(window).on("touchmove",function(t){t.preventDefault()})};switch(o=o?function(){p(),o()}:p,h){case"show":d="show",f=0}if(r&&_.isNumber(r.opacity)&&(u=r.opacity,delete r.opacity),e){if(!t.isFading){a=ucf.utils.Body.getPageSize(),c=ucf.utils.Body.getPageScroll();var g={width:a[2],height:a[3],top:c[1]>0?c[1]:"0",left:c[0]>0?c[0]:"0"};return(_.isString(u)||u>0)&&(g.opacity=u),n.css(g),n[d]("fast"),o&&_.delay(o,f),void 0}n.remove(),n=null,t.showTime=0,t.isFading=!1,e=!1}return _.extend(i,r),_.isEmpty(n)&&(_.isUndefined(s)?$("body").append('<div id="bodyMask"></div>'):($(s).append('<div id="bodyMask"></div>'),l="relative"),n=$("#bodyMask"),n.css({backgroundColor:i.bgColor,top:"0",left:"0",position:"absolute",zIndex:i.zIndex,opacity:u,"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"})),a=ucf.utils.Body.getPageSize(),c=ucf.utils.Body.getPageScroll(),n.css({width:a[2],height:a[3],top:c[1]>0?c[1]:"0",left:c[0]>0?c[0]:"0",opacity:u}),e=!0,n[d]("fast"),o&&_.delay(o,f),n},t.setOpacity=function(t){_.isEmpty(n)||n.css("opacity",t)},t.remove=function(e){if(!_.isEmpty(n)&&(t.showTime-=1,t.showTime<=0)){t.showTime=0;var i="fadeOut",r=200;switch(e){case"remove":i="hide",r=0}t.isFading=!0,n[i]("fast"),_.delay(function(){t.isFading=!1,$(window).off("resize"),$(window).off("scroll"),$(window).off("touchmove")},r)}}}(sdk.common.ui.Mask);sdk.common.ui.MsgBox=sdk.common.ui.MsgBox||{},function(t){var e="Msg",n=!1,i={height:"auto",width:"86%",zIndex:200};t.setup=function(t){_.extend(i,t)},t.alert=function(e,n){t.show(e,n)},t.confirm=function(e,n){t.show(e,n,"confirm")},t.show=function(r,o,s,a){if(!_.isEmpty(r)){switch(a=_.isBoolean(a)?a:!0,s=null!=s?s:"default",o=_.isEmpty(o)?{}:o,ucf.effect.Touch,s){case"confirm":e="Confirm";break;default:e="Msg"}a&&sdk.common.ui.Mask.show({opacity:.3}),$box=$("#ui"+e+"Box"),$box.length<=0&&($("body").append($("#"+e+"Box-tpl").html()),$box=$("#ui"+e+"Box"),$box.css("zIndex",i.zIndex)),$("#ui"+e+"BoxContent").html(r),$box.height(i.height),$box.width(i.width),$box.fadeIn("fast"),$box.UcEffects().moveTo("center","center"),$boxConfirm=$("#ui"+e+"BoxConfirm"),$boxCancel=$("#ui"+e+"BoxCancel"),$boxConfirm.removeClass("btnClick-none"),$boxCancel.removeClass("btnClick-none");var c=function(){o.confirmName?$boxConfirm.val(o.confirmName):$boxConfirm.val("确定"),$boxConfirm.length>=1&&($boxConfirm.off("click"),$boxConfirm.on("click",function(){$boxConfirm.addClass("btnClick-none"),t.remove(),_.isEmpty(o)||!_.isUndefined(o.callBack)&&_.isFunction(o.callBack)&&o.callBack()})),$boxCancel.length>=1&&(o.cancelName?$boxCancel.val(o.cancelName):$boxCancel.val("取消"),$boxCancel.off("click"),$boxCancel.on("click",function(){$boxCancel.addClass("btnClick-none"),t.remove(),_.isEmpty(o)||!_.isUndefined(o.cancel)&&_.isFunction(o.cancel)&&o.cancel()}))};c(),$(":focus").blur(),$(window).on("resize",t.onResize),$(window).on("scroll",t.onScroll),n=!0}},t.remove=function(){$("#ui"+e+"Box").fadeOut(),sdk.common.ui.Mask.remove(),n=!1,$(window).off("resize"),$(window).off("scroll")},t.onResize=function(){n&&($("#ui"+e+"Box").height(i.height),$("#ui"+e+"Box").css("width",""),$("#ui"+e+"Box").width(i.width),$("#ui"+e+"Box").UcEffects().moveTo("center"))},t.onScroll=function(){n&&$("#ui"+e+"Box").UcEffects().moveTo("center")}}(sdk.common.ui.MsgBox);sdk.common.ui.NoticeBox=sdk.common.ui.NoticeBox||{},function(t){var e=[],n=!1,i=0,o={},r={zIndex:199,hideTime:3,okCls:"noticeOk",errorCls:"noticeError",loadingWidth:40},s='<div id="<%=noticeId%>" class="<%=addCls%>"><p class="item ms-tc"><span<% if(noticeCls) { %> class="<%=noticeCls%>"<% } %>><%=msg%></span></p></div>',a=function(){var t=$("a"),e=$("input"),n=$("select");_.each(t,function(t){$(t).addClass("btnClick-none")}),_.each(e,function(t){$(t).addClass("btnClick-none")}),_.each(n,function(t){$(t).addClass("ms-ni")})},c=function(){var t=$("a"),e=$("input"),n=$("select");_.each(t,function(t){$(t).removeClass("btnClick-none")}),_.each(e,function(t){$(t).removeClass("btnClick-none")}),_.each(n,function(t){$(t).removeClass("ms-ni")})},l=function(e,i,o,s,a,c,l){var u=e.el;!1!==o&&(n=!0);var h="fadeIn",d="fade";switch(a){case"slide":h="slideDown";break;case"show":h="show",d="show"}l=l||{},c&&S.common.ui.Mask.show({opacity:l.maskOpacity,showType:d}),i=_.isNull(i)||_.isUndefined(i)?!0:i,i?(u[h]("fast"),_.isNumber(i)?_.delay(function(){t.hide(e,s)},1e3*i):_.delay(function(){t.hide(e,s)},1e3*r.hideTime)):u[h]("fast",s)},u=function(t,e){this.height=t||16,this.rgbColorArray=null!=e&&3==e.length?e:[32,56,14],this.canvasElem=document.createElement("canvas"),this.rotation=0,this.intervalId=null,this.isRunning=!1};u.prototype.draw=function(){this.rotation<0&&(this.rotation=-this.rotation),this.rotation%=12;var t=this.height,e=this.canvasElem;e.setAttribute("width",this.height),e.setAttribute("height",this.height);var n=e.getContext("2d"),i=2*-Math.PI/12;n.save(),n.clearRect(0,0,t,t),n.translate(t/2,t/2);for(var o=t/10,r=t/5,s=0;12>s;s++){n.save(),n.rotate(s*i);var a=(12-(s+this.rotation)%12)/12;n.fillStyle="rgba("+this.rgbColorArray[0]+","+this.rgbColorArray[1]+","+this.rgbColorArray[2]+","+a+")",n.fillRect(-o/2,r,o,r),n.restore()}return n.restore(),this.rotation++,this.rotation%=12,e},u.prototype.rotate=function(){var t=this;this.intervalId=window.setInterval(function(){t.draw()},50)},u.prototype.stop=function(){window.clearInterval(this.intervalId)},t.setup=function(t){_.extend(r,t)},t.ok=function(e,n){return t.show(e,"ok","ui-sucont",!0,null,{position:"center",callback:n})},t.error=function(e,n){return t.show(e,"error","ui-sucont",!0,null,{position:"center",callback:n})},t.popError=function(e,n,i){return s='<span class="ms-fl red" id="<%=noticeId%>"><%=msg%></span>',t.show(e,"error","",!1,n,{showMask:!1,showType:"slide",callback:i})},t.loading=function(e,n){t.loadingBox=new u(r.loadingWidth,[119,119,119]),t.loadingBox.draw(),t.loadingBox.rotate();var i=r.loadingWidth;"loading_text"===e&&(i=100);var o=t.loadingBox.canvasElem,s=t.show(e,"loading","",!1,null,{position:"center",callback:n,width:i,height:r.loadingWidth,showType:"show"});return s.el.html(o),"loading_text"===e&&($(o).css({display:"block",position:"relative",margin:"auto"}),s.el.append('<div style="color:#C2C2C2;font-size:14px;text-align:center;">努力激活中...</div>')),s},t.show=function(t,c,u,h,d,f){a();var p={};p.msg=t;var g="";p.addCls=u,f=f||{},i++;var m=i;switch(p.noticeId="noticeContainer"+m,c){case"ok":p.noticeCls=r.okCls,f.maskOpacity=.3;break;case"error":p.noticeCls=r.errorCls,f.maskOpacity=.3;break;case"loading":g='<div id="<%=noticeId%>"></div>',f.maskOpacity="0"}_.isEmpty(g)&&(g=s);var v=template.compile("",g),y=v(p),b="";if(_.isEmpty(d)){if(sdk.EC.hideInput(),$("body").append(y),b=$("#"+p.noticeId),f.width&&b.width(f.width),f.height&&b.height(f.height),b.css("zIndex",r.zIndex),(""==b.css("position")||"static"==b.css("position"))&&b.css("position","absolute"),f.position){var w=function(){var t={paddingLeft:{type:"width",count:1},paddingRight:{type:"width",count:1},paddingTop:{type:"height",count:1},paddingBottom:{type:"height",count:1},border:{count:2}},e=f.width?f.width:parseInt(b.width()),n=f.height?f.height:parseInt(b.height());_.each(t,function(t,i){t.value=b.css(i)?parseInt(b.css(i)):0,t.value=isNaN(t.value)?0:t.value,"width"==t.type?e+=t.value*t.count:"height"==t.type?n+=t.value*t.count:(e+=t.value*t.count,n+=t.value*t.count)});var i=ucf.utils.Body.getPosition(e,n,f.position),o=ucf.utils.Body.getPageScroll();(""==b.css("top")||"auto"==b.css("top"))&&b.css("top",i[3]+o[1]),(""==b.css("left")||"auto"==b.css("left"))&&b.css("left",i[2]+o[0])};w(),$(window).on("resize",function(){b.css("top",""),b.css("left",""),w()}),$(window).on("scroll",function(){b.css("top",""),b.css("left",""),w()})}}else d.prepend(y),b=$("#"+p.noticeId),f.width&&b.width(f.width),f.height&&b.height(f.height);b.hide();var S=_.isEmpty(d),x=f.callback?f.callback:null,E=_.isUndefined(f.showMask)?!0:f.showMask,k=_.isUndefined(f.showType)?"fade":f.showType,C={id:m,el:b};if(o[m]={showMask:!0},n&&S){for(var T=[],I=0;I<arguments.length;I++)T.push(arguments[I]);return e.push({id:m,el:b,args:T}),C}return l(C,h,S,x,k,E,f),C},t.hide=function(i,r,s){c();var a=i.el,u=i.id;if(a&&a.length>=1){var h="fadeOut",d="fade",f=200;switch(s){case"slide":h="slideUp";break;case"remove":h="remove",d="remove",f=1}a[h]("fast"),_.delay(function(){$(window).off("resize"),$(window).off("scroll"),o[u]&&o[u].showMask&&S.common.ui.Mask.remove(d),_.isEmpty(t.loadingBox)||t.loadingBox.stop(),sdk.EC.showInput(),n=!1;var i=e.shift();if(r&&r.apply(),i){var s=!_.isEmpty(i.args[5])&&i.args[5].callback?i.args[5].callback:null,a=_.isEmpty(i.args[5])||_.isUndefined(i.args[5].showMask)?!0:i.args[5].showMask,c=_.isEmpty(i.args[5])||_.isUndefined(i.args[5].showType)?"fade":i.args[5].showType;l({id:i.id,el:i.el},i.args[3],_.isEmpty(i.args[4]),s,c,a,i.args[5])}},f)}}}(sdk.common.ui.NoticeBox);sdk.common.ui.Tab=sdk.common.ui.Tab||{},function(t){t.switching=function(t,e,n,i){var o=$(t+">"+e);o.on(n,function(){for(var e=0;e<o.length;e++)o[e]==this?(o.eq(e).addClass(i).removeClass("off"),$(t+"_"+e).show()):(o.eq(e).removeClass(i),$(t+"_"+e).hide())})},t.switchTo=function(t,e,n,i){n=n||"li",i=i||"current";for(var o=$(t+">"+n),r=0;r<o.length;r++)r==e?(o.eq(r).addClass(i).removeClass("off"),$(t+"_"+r).show()):(o.eq(r).removeClass(i),$(t+"_"+r).hide())},t.click=function(t,e,n,i){var o=$(e+">"+n);if(o.length>0){o.removeClass(i);for(var r=0;r<o.length;r++)o[r].id==t[0].id?$(e+"_"+r).show():$(e+"_"+r).hide()}t.addClass(i)}}(sdk.common.ui.Tab);sdk.common.ui.Umbrella=sdk.common.ui.Umbrella||{},function(t){t.icon_umbrella=$("#icon_umbrella"),t.umbrella_box=$("#umbrella_box"),t.animate=null,t.state={post:"show",reply:"show"},t.type="post",t.operation={post:"#makeNewReply",reply:"#makeNewPost"},t.init=function(e){e=e||"post",t.type=e,t.icon_umbrella=$("#icon_umbrella"),t.umbrella_box=$("#umbrella_box"),"show"!=t.state[e]&&(t.icon_umbrella.removeClass("icon_parasol"),t.icon_umbrella.addClass("icon_umbrella"),t.umbrella_box.width("0px"),t.umbrella_box.hide()),t.icon_umbrella.on("click",t.toggle),$(t.operation[e]).remove()},t.toggle=function(){t.icon_umbrella=$("#icon_umbrella"),t.umbrella_box=$("#umbrella_box"),t.icon_umbrella.hasClass("icon_umbrella")?t.slideshow():t.slidehide()},t.slideshow=function(){t.state[t.type]="show",clearInterval(t.animate),t.icon_umbrella.addClass("icon_parasol"),t.icon_umbrella.removeClass("icon_umbrella"),t.umbrella_box.show(),t.animate=setInterval(function(){var e=parseInt(t.umbrella_box.width());200>e?0==e?t.umbrella_box.width(30):t.umbrella_box.width(e+30):(t.umbrella_box.width(220),clearInterval(t.animate))},30)},t.slidehide=function(){t.state[t.type]="hide",clearInterval(t.animate),t.icon_umbrella.removeClass("icon_parasol"),t.icon_umbrella.addClass("icon_umbrella"),t.animate=setInterval(function(){t.umbrella_box.show();var e=parseInt(t.umbrella_box.width());e>30?t.umbrella_box.width(e-30):(t.umbrella_box.width("0px"),t.umbrella_box.hide(),t.icon_umbrella.show(),clearInterval(t.animate))},30)}}(sdk.common.ui.Umbrella);sdk.EC=sdk.common.utils.ElementControl=sdk.common.utils.ElementControl||{},function(t){t.showInput=function(){$("[type=text],[type=password],textarea").css("visibility","visible")},t.hideInput=function(){$("[type=text],[type=password],textarea").css("visibility","hidden")}}(sdk.EC);sdk.Log=sdk.common.utils.Log=sdk.common.utils.Log||{},function(t){t.businesses={PAGE_USER:"page.user",PAGE_GAME:"page.game",PAGE_PAY:"page.pay",PAGE_GENERAL:"page.general",PAGE_BBS:"page.bbs"},t.steps={ENTER:"enter",CLOSE:"close"},t.currBusiness="",t.pageEnter=function(e,n){if(_.isUndefined(e)||_.indexOf(_.values(t.businesses),e)<0)throw"log.js : business is not correct!";var i="";_.isUndefined(n)||_.isEmpty(n)||_.each(n,function(t){i+="."+t}),t.debug("page Enter:"+e+"|"+e+i),t.currBusiness=e+i;var o=e+i;setTimeout(function(){S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.STAT,{business:o,step:t.steps.ENTER},null,null,null,null,{quiet:!0})},0)},t.pageClose=function(e,n){n=n||{};var i=n.quiet===!1?!1:!0;if(!_.isEmpty(t.currBusiness)){var o=t.currBusiness;t.debug("page Close:"+o),setTimeout(function(){S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.STAT,{business:o,step:t.steps.CLOSE},e,e,null,null,{quiet:i})},0)}},t.click=function(e,n,i){i=i||{};var o=i.quiet===!1?!1:!0;if(_.isUndefined(e)||_.indexOf(_.values(t.businesses),e)<0)throw"log.js : business is not correct!";var r="";_.isUndefined(n)||_.isEmpty(n)||_.each(n,function(t){r+="."+t}),t.debug("page Enter:"+e+"|"+e+r);var s=e+r;setTimeout(function(){S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.STAT,{business:s,step:t.steps.CLOSE},i.callback,i.callback,null,null,{quiet:o})},0)},t.debug=function(t){console.log(t)},t.info=function(){},t.warn=function(){},t.error=function(){}}(sdk.Log);sdk.PageCache=sdk.common.utils.PageCache=sdk.common.utils.PageCache||{},function(t){t.get=function(t,e,n){S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.GET_PAGE_PARAMS,{key:t},e,n,null,null,{quiet:!0})},t.set=function(t,e){S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.SET_PAGE_PARAMS,{key:t,value:e},null,null,null,null,{quiet:!0})},t.del=function(t){S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.SET_PAGE_PARAMS,{key:t},null,null,null,null,{quiet:!0})}}(sdk.PageCache);sdk.Url=sdk.common.utils.Url=sdk.common.utils.Url||{},function(t){t.staticImg=function(){},t.redirect=function(t){function e(){window.location.href=t}S.Log.pageClose(e,{quiet:!1})},t.back=function(){S.Log.pageClose(),S.sdkBase.request(S.sdkBase.servType.APP,S.sdkBase.actions.HISTORY_BACK,null,null,null,!0,null,{quiet:!0})},t.reload=function(){window.location.reload()},t.location={},t.location.route=function(t){window.location.hash=t,S.Log.pageClose()},t.getQueryStringArgs=function(){var t=window.location.search.length>0?location.search.substr(1):"",e={},n=t.length?t.split("&"):[],i=null,o=null,r=null,s=0,a=n.length;for(s=0;a>s;s++)i=n[s].split("="),o=decodeURIComponent(i[0]),r=decodeURIComponent(i[1]),o.length&&(e[o]=r);return e}}(sdk.Url);sdk.VirtualEvent=sdk.common.utils.VirtualEvent=sdk.common.utils.VirtualEvent||{},function(t){var e=ucf.effect.Touch;t.click=function(t,n,i,o,r){i=_.isUndefined(i)?{}:i,o=_.isUndefined(o)||_.isEmpty(o)?"":o;var s,a=!1,c=!1,l=0,u=0;if(e.isTouchDevice())var h="touchstart"+o,d="touchmove"+o,f="touchend"+o;else var h="mousedown"+o,d="mousemove"+o,f="mouseup"+o;var p={start:{eventName:h,method:function(t){a=!0,c=!0,s=this;var n=!1;if(_.each(rConfig.hasFeedBack,function(t){"true"!==$(s).attr("data-disabled")&&($(s).hasClass(t)||"feed"==$(s).attr("data-btnFeed"))&&(n=!0)}),_.each(rConfig.blockFeedBack,function(t){$(s).hasClass(t)&&(n=!1)}),n&&$(s).addClass(rConfig.feedBackCls),e.isTouchDevice())var i=t.touches[0];else var i=t;l=i.clientX,u=i.clientY}},move:{eventName:d,method:function(t){if(c){if($(document).height()<=$(window).height()&&t.preventDefault(),e.isTouchDevice())var n=t.touches[0];else var n=t;(Math.abs(n.clientX-l)>5||Math.abs(n.clientY-u)>5)&&(a=!1)}}},up:{eventName:f,method:function(t){if(c){if("true"===$(this).attr("data-disabled"))return;$(this).hasClass(rConfig.feedBackCls)&&$(this).removeClass(rConfig.feedBackCls),$(document).height()<=$(window).height()&&t.preventDefault(),a&&n(t,this,i),a=!1,c=!1}},docMethod:function(){a||$("."+rConfig.feedBackCls).removeClass(rConfig.feedBackCls)}}};_.isUndefined(r)||_.isEmpty(r)?($(t).on.apply($(t),[p.start.eventName,p.start.method]),$(t).on.apply($(t),[p.move.eventName,p.move.method]),$(t).on.apply($(t),[p.up.eventName,p.up.method]),$(document).on.apply($(document),[p.up.eventName,p.up.docMethod])):($(t).on.apply($(t),[p.start.eventName,r,p.start.method]),$(t).on.apply($(t),[p.move.eventName,r,p.move.method]),$(t).on.apply($(t),[p.up.eventName,r,p.up.method]),$(document).on.apply($(document),[p.up.eventName,p.up.docMethod]))},t.offClick=function(t){if(e.isTouchDevice())var n="touchstart",i="touchmove",o="touchend";else var n="mousedown",i="mousemove",o="mouseup";$(t).off(n),$(t).off(i),$(t).off(o)},t.delegateEvents=function(e,n,i){var o=function(t,e){return t&&t[e]?_.isFunction(t[e])?t[e]():t[e]:null},r=/^(\S+)\s*(.*)$/;if(e||(e=o(n,"events"))){n.undelegateEvents();for(var s in e){var a=e[s];if(!_.isUndefined(i)&&_.isFunction(i)){var c=function(t){return function(){i(t)}}(a);a=c}if(_.isFunction(a)||(a=n[e[s]]),!a)throw new Error('Method "'+e[s]+'" does not exist');var l=s.match(r),u=l[1],h=l[2];switch(a=_.bind(a,n),u){case"onclick":case"touch":""===h?t.click(n.$el,a,null,".delegateEvents"+n.cid):t.click(n.$el,a,null,".delegateEvents"+n.cid,h);break;case"start":case"move":case"up":""===h?ucf.effect.Touch.on(u,n.$el,a,!0,null,".delegateEvents"+n.cid):ucf.effect.Touch.on(u,n.$el,a,!0,null,".delegateEvents"+n.cid,h);break;case"click":u="click",u+=".delegateEvents"+n.cid,""===h?n.$el.on(u,a):n.$el.on(u,h,a);break;default:u+=".delegateEvents"+n.cid,""===h?n.$el.on(u,a):n.$el.on(u,h,a)}}}},t.undelegateEvents=function(t){t.$el.off(".delegateEvents"+t.cid)}}(sdk.VirtualEvent);